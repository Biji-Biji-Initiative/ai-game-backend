# Domain Events Migration Checklist

This document tracks the progress of migrating repositories to use the standardized entity-based event collection pattern.

## Overview

This checklist tracks the status of migrating each repository from direct event publishing to the standardized entity-based event collection pattern. The goal is to ensure consistent event handling across the codebase.

## Migration Stages

Each repository goes through the following stages:

1. **Entity Events**: The domain entity class properly implements `addDomainEvent` and `getDomainEvents` methods.
2. **Transaction**: The repository uses the `withTransaction` method for database operations.
3. **Save with Events**: The repository implements the `_saveWithEvents` pattern for entity saving.
4. **Delete with Events**: The repository implements the `_deleteWithEvents` pattern for entity deletion.
5. **Batch with Events**: The repository implements the `_batchWithEvents` pattern for batch operations.
6. **Tests**: The repository has tests for the new event handling pattern.

## Repository Migration Status

| Repository | Entity Events | Transaction | Save with Events | Delete with Events | Batch with Events | Tests | Status |
|------------|--------------|-------------|------------------|-------------------|------------------|-------|--------|
| ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |  |
| challengeRepository | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |
| evaluationRepository | ✅ | ✅ | ✅ | ⬜️ | ⬜️ | ⬜️ | **UPDATED** |
| focusAreaRepository | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |
| adaptiveRepository | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |
| progressRepository | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |
| promptRepository | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |
| FormatTypeRepository | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | ⬜️ | Not Started |

## Automated Migration

This checklist is updated automatically by the `update-repository-checklist.js` script, which processes the report generated by the `update-repositories.js` script.

To run the automated migration:

1. Execute the repository update script:
   ```bash
   node scripts/update-repositories.js --dry-run
   ```

2. Review the changes and run without dry-run to apply:
   ```bash
   node scripts/update-repositories.js
   ```

3. Update this checklist with the results:
   ```bash
   node scripts/update-repository-checklist.js reports/repository-update-[timestamp].json
   ```

## Manual Verification

After automated updates, each repository should be manually verified for:

1. Correct implementation of entity-based event collection
2. Proper transaction handling
3. All direct event publishing replaced
4. Tests passing

## Testing Strategy

For each migrated repository:

1. Run unit tests to verify correct behavior
2. Check that domain events are properly collected and published
3. Verify that event handlers receive the standardized event format
4. Test error handling scenarios 
## Latest Update

**Update date:** 2025-03-31

**Report file:** repository-update-2025-03-31T15-18-11-519Z.json

**Summary:**
- Total repositories: 1
- Scanned: 1
- Updated: 1
- Skipped: 0
- Errors: 0

**Updated repositories:**
- evaluationRepository

